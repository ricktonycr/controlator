<!DOCTYPE html>
<html>
<head>
   <title>Control</title>
   <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
   <style>

html,body{
   width: 100%;
   height: 100%;
   margin: 0px;
   border: none;
   padding: 0px;
   background-color: #444;
}

#content{
   width: 100%;
   height: 90%;
   display: table;
}

#left, #right{
  width: 100%;
  height: 50%;
}

#left{
  background-color: #eee;
}

   </style>
</head>
<body>
<div class="image">
</div>
<div id="content">
   <div id="left" class="direction"></div>
   <div id="right" class="direction"></div>
</div>
   <button id="button" onclick="RTC.openConnection();">conectar</button>

<script src="js/webrtcConnection.js"></script>
  <script src="../../js/jquery-1.11.3.js"></script>
<script type="text/javascript">
  (function(){

   var cont = 0;

var t=0;
   function message(mess){
   }

   var left = document.getElementById("left");
   var right = document.getElementById("right");

   left.addEventListener("click",function(){
      RTC.sendMessage("l");
   });
   right.addEventListener("click",function(){
      RTC.sendMessage("r");
   });

    RTC.init("control","server","ws://10.42.0.1:1232",'websocket',message);
    console.log("sdfsdfsd");


    var Y = 0;
    window.ondevicemotion = function(event) {
      var accelerationX = event.accelerationIncludingGravity.x;
      var accelerationY = event.accelerationIncludingGravity.y;
      var accelerationZ = event.accelerationIncludingGravity.z;

      if(Math.abs(Y - accelerationY) > 0.1){
        Y = accelerationY;
        RTC.sendMessage(Y);
      }
    }
  })();
</script>
</body>
</html>